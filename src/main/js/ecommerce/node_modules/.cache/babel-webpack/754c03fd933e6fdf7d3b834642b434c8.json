{"ast":null,"code":"\"use strict\";\n\nvar selenium_webdriver_1 = require(\"selenium-webdriver\");\n\nvar commandDefinitions = require(\"./command_definitions\");\n\nvar deferred_executor_1 = require(\"./deferred_executor\");\n\nvar extender_1 = require(\"./extender\");\n\nfunction extend(baseDriver, fallbackGracefully) {\n  if (fallbackGracefully === void 0) {\n    fallbackGracefully = false;\n  }\n\n  var extender = new extender_1.Extender(baseDriver);\n  var extendedDriver = baseDriver;\n\n  for (var commandName in commandDefinitions) {\n    extendedDriver[commandName] = commandDefinitions[commandName].compile(extender, fallbackGracefully);\n  }\n\n  return extendedDriver;\n}\n\nexports.extend = extend;\n/**\n * Patches webdriver so that the extender can defie new commands.\n *\n * @example\n * patch(require('selenium-webdriver/lib/command'),\n *     require('selenium-webdriver/executors'),\n *     require('selenium-webdriver/http'));\n *\n * @param {*} lib_command The object at 'selenium-webdriver/lib/command'\n * @param {*} executors The object at 'selenium-webdriver/executors'\n * @param {*} http The object at 'selenium-webdriver/http'\n */\n\nfunction patch(lib_command, executors, http) {\n  if (lib_command.DeferredExecutor === undefined) {\n    throw new Error('The version of `selenium-webdriver` you provided does ' + 'not use Deferred Executors.  Are you using version 3.x or above? If ' + 'so, you do not need to call the `patch()` function.');\n  }\n\n  lib_command.DeferredExecutor = deferred_executor_1.DeferredExecutor;\n  executors.DeferredExecutor = deferred_executor_1.DeferredExecutor; // Based off of\n  // https://github.com/SeleniumHQ/selenium/blob/selenium-2.53.0/javascript/node/selenium-webdriver/executors.js#L45\n\n  executors.createExecutor = function (url, opt_agent, opt_proxy) {\n    return new deferred_executor_1.DeferredExecutor(selenium_webdriver_1.promise.when(url, function (url) {\n      var client = new http.HttpClient(url, opt_agent, opt_proxy);\n      return new http.Executor(client);\n    }));\n  };\n}\n\nexports.patch = patch; //# sourceMappingURL=index.js.map","map":null,"metadata":{},"sourceType":"script"}